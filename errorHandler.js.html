<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: errorHandler.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: errorHandler.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * js/errorHandler.js
 * Handles error display and developer tools prevention.
 * @module errorHandler
 */

// Retrieve error message from localStorage for display
const msg = localStorage.getItem("streamit_error");

// Get references to error display elements
const errorMessageEl = document.getElementById("error-message");
const errorCodeEl = document.getElementById("error-code");

// Parse error code from URL parameters
const urlParams = new URLSearchParams(window.location.search);
const paramCode = urlParams.get("code");

// Display error message if it exists in localStorage
if (msg &amp;&amp; errorMessageEl) {
  errorMessageEl.textContent = msg;
  // Clean up localStorage after displaying the message
  localStorage.removeItem("streamit_error");
} else if (msg &amp;&amp; !errorMessageEl) {
  // Clean up localStorage if error element doesn't exist
  localStorage.removeItem("streamit_error");
}

// Display error code from URL parameter or default to 404
if (errorCodeEl) {
  // Special formatting for 403 Forbidden errors
  if (paramCode === "403") {
    errorCodeEl.textContent = "403 - Forbidden";
  } else
    // Display the provided error code or default to 404
    errorCodeEl.textContent = (paramCode || "404").toString();
}

/**
 * Handles an error by storing the message and redirecting to the error page.
 * @param {string} message - The error message to display.
 * @param {number|string} [code=404] - The error code to display.
 */
function handleErrorAndRedirect(message, code = 404) {
  localStorage.setItem("streamit_error", message);
  const safeCode = (typeof code === "number" || typeof code === "string") ? code : 404;
  window.location.href = `error.html?code=${encodeURIComponent(safeCode)}`;
}

// Prevent right-click context menu to protect content
document.addEventListener("contextmenu", (e) => e.preventDefault());

// Prevent common developer tools keyboard shortcuts
document.addEventListener("keydown", (e) => {
  // Detect F12, Ctrl+Shift+I (Inspect), or Ctrl+U (View Source)
  if (
    e.key === "F12" ||
    (e.ctrlKey &amp;&amp; e.shiftKey &amp;&amp; e.key.toLowerCase() === "i") ||
    (e.ctrlKey &amp;&amp; e.key.toLowerCase() === "u")
  ) {
    e.preventDefault();
    // Redirect to error page with 403 status
    handleErrorAndRedirect(
      "L'utilisation des outils de développement est interdite sur cette page.", 403
    );
  }
});

/**
 * Detects if developer tools are open and redirects if so.
 */
(function detectDevTools() {
  // Measure time taken by debugger statement (slow if devtools open)
  const start = Date.now();
  debugger; // This pauses execution if developer tools are open
  if (Date.now() - start > 100) {
    // Developer tools detected - redirect to error page
    handleErrorAndRedirect(
      "L'utilisation des outils de développement est interdite sur cette page.", 403
    );
  }
  // Run detection check every second
  setTimeout(detectDevTools, 1000);
})();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-dataLoader.html">dataLoader</a></li><li><a href="module-display.html">display</a></li><li><a href="module-errorHandler.html">errorHandler</a></li><li><a href="module-main.html">main</a></li><li><a href="module-utils.html">utils</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Sun Feb 22 2026 09:55:20 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
